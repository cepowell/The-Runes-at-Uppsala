<div id="home-button">
      <input type="button" value="Home" onclick="returnHome();"></input>
</div>
<div id="reset-button">
      <input type="button" value="Reset" onclick="returnToBeginning();"></input>
</div>
<div id="poem-popup" class = "popup" title="Precita">
  <p>
    <% include ../partials/precita %>
  </p>
</div>
<div id="map"></div>

<script>

    var panorama;
    var map;
    var start = {lat: latitude, lng: longitude};
    var precitaCoords = {lat: 37.7471689, lng: -122.4105643};

    function initialize() {

      map = new google.maps.Map(document.getElementById('map'), {
         center: start,
         zoom: 18,
         streetViewControl: false,
         addressControl: false,
         fullscreenControl: false
       });

       var precita = new google.maps.Marker({
            position: precitaCoords,
            map: map,
            icon: '../img/marker.png',
            title: 'Precita'
        });

        precita.addListener('click', function() {
          $("#poem-popup").dialog({
            autoOpen: false,
            draggable: true,
            resizeable: true,
            maxHeight: 500,
            minHeight: 200
          });
          $("#poem-popup").dialog("open");
          console.log('Clicked');
        });

        panorama = map.getStreetView();
        panorama.setPosition(start);
        panorama.setPov(({
          heading: 265,
          pitch: 0
        }));
        panorama.setVisible(true);

    }

    function returnHome() {
      window.location.href = "/";
    }

    function returnToBeginning() {
      initialize();
    }

  </script>
  <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBmkr8TmD8x5uppiNmwYlM70fFPBPPofqg&callback=initialize">
  </script>
